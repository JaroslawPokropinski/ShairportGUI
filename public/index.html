<!DOCTYPE html>
<html>
    <head>
        <title>ShairportGUI</title>
        <style>
            @import url("https://fonts.googleapis.com/css2?family=Khula:wght@400;600;700&family=Public+Sans:wght@100;300;400;600&display=swap");

            body {
                background-color: #d2e1f8;
                font-family: "Public Sans", sans-serif;
                color: #6b728d;
            }

            .container {
                height: 100vh;
                width: 100%;
                display: flex;
                flex-direction: row;
                align-items: center;
                justify-content: center;
            }

            #phone {
                display: flex;
                flex-direction: row;
                align-items: center;
                justify-content: center;
                gap: 10%;
                background-color: rgba(255, 255, 255, 0.5);
                background: linear-gradient(
                    0deg,
                    rgba(255, 255, 255, 0.1) 0%,
                    rgba(255, 255, 255, 0.6) 50%,
                    rgba(255, 255, 255, 0.1) 100%
                );
                height: 90vh;
                width: 90%;
                padding: 2-px;
                border-radius: 25px;
                box-shadow: rgba(104, 139, 255, 0.1) 0px 48px 100px 0px,
                    rgba(17, 12, 46, 0.15) 0px 30px 100px 0px;
            }

            .song-thumbnail {
                background-image: url("https://images.unsplash.com/photo-1557672172-298e090bd0f1?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80s");
                background-size: cover;
                background-position: center center;
                height: 600px;
                width: 600px;
                border-radius: 50%;
            }

            .thumbnail-border {
                display: flex;
                height: 600px;
                width: 600px;
                /* margin: 10% auto auto auto; */
                /* margin-left: 15%;
  margin-top: 15%; */
                border-radius: 50%;
                padding: 0.4rem;
                box-shadow: inset 6px 6px 20px 0 rgba(104, 139, 255, 0.2),
                    rgba(104, 139, 255, 0.1) 0px 4px 20px,
                    rgba(104, 139, 255, 0.1) 0px 8px 24px,
                    rgba(102, 111, 128, 0.4) 0px 16px 45px;
                /* animation: spin 10s linear infinite; */
            }

            #song-details {
                /* margin-top: 5%; */
                display: flex;
                flex-direction: column;
                width: 30%;
                /* align-items: center; */
                text-overflow: ellipsis;
                overflow: hidden;
                white-space: normal;
            }

            .song-title {
                font-size: 4rem;
            }

            .album-title {
                font-size: 2rem;
            }

            .artist {
                font-size: 2rem;
                color: #abb3c7;
            }

            @keyframes spin {
                100% {
                    -webkit-transform: rotate(360deg);
                    transform: rotate(360deg);
                }
            }
        </style>
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
            integrity="sha512-Fo3rlrZj/k7ujTnHg4CGR2D7kSs0v4LLanw2qksYuRlEzO+tcaEPQogQ0KaoGN26/zrn20ImR1DfuLWnOo7aBA=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
        />
    </head>
    <body>
        <div class="container">
            <div id="phone">
                <div class="thumbnail-border">
                    <div class="song-thumbnail"></div>
                </div>
                <!--/thumbnail-border -->

                <div id="song-details">
                    <h1 id="title" class="song-title">Song Title</h1>
                    <h1 id="album" class="album-title">Album title</h1>
                    <span id="artist" class="artist">Band ft. Song Artist</span>
                </div>
                <!-- /song-details -->
            </div>
            <!-- /phone -->
        </div>
        <!-- /container -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js"></script>
        <script>
            var socket = io();
            socket.on("metadata", function (metadata) {
                let title = document.getElementById("title");
                let album = document.getElementById("album");
                let artist = document.getElementById("artist");
                title.textContent = metadata.title;
                album.textContent = metadata.album;
                artist.textContent = metadata.artist;
                console.log("data get!");
            });

            socket.on("pictureData", function (pictureData) {
                let img = "url('data:image/png;base64, " + pictureData + "')";
                // img.src = `data:image/png;base64,` + pictureData;
                console.log("picture get!");
                document.getElementsByClassName("song-thumbnail").style.backgroundImage = img;
                console.log("picture set!");
            });
        </script>
    </body>
</html>
